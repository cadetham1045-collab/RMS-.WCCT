{% extends 'base.html' %}
{% block content %}
<h2>ğŸ” Search Students</h2>
<div class="quick-links">
  <a href="/">ğŸ  Home</a>
</div>
<div class="form" style="max-width:600px;margin:0 auto">
  <form method="post" class="search">
    <input name="query" placeholder="ğŸ” Enter name or roll number..." value="{{ query or '' }}">
    <button class="btn" type="submit">Search</button>
  </form>
</div>

<div style="margin-top:20px">
  {% if students %}
    <table>
      <tr><th>Roll Number</th><th>Name</th><th>Class</th><th>Subjects</th></tr>
      {% for s in students %}
        <tr>
          <td><strong>{{ s.roll_number }}</strong></td>
          <td>{{ s.name }}</td>
          <td>{{ s.class_grade }}</td>
          <td>
            {% set marks = s.marks %}
            {% if marks %}
              <span class="small">{{ marks|map(attribute='subject')|unique|list|join(', ') }}</span>
            {% else %}
              <span class="small">â€”</span>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </table>
  {% elif query %}
    <div class="flash warning">
      âš ï¸ No students found matching "{{ query }}"
    </div>
  {% else %}
    <p class="small" style="text-align:center;padding:20px;color:#666">Enter a name or roll number to search</p>
  {% endif %}
</div>
{% endblock %}
