{% extends 'base.html' %}
{% block content %}
<h2>üìä Bulk Upload Results/Marks</h2>

<div class="form" style="max-width:600px;margin:20px auto;padding:20px">
  <p style="margin-bottom:15px;color:#555">Upload a CSV or Excel file to import marks for a specific result type (1st, 2nd, or Board).</p>
  
  <div style="background:#f0f8ff;padding:15px;border-radius:5px;margin-bottom:20px;border-left:4px solid #2196F3">
    <strong>File Format Required:</strong>
    <p style="margin:8px 0;font-size:0.9em">
      The file must contain these columns (in any order):<br>
      <code>roll_number</code>, <code>subject</code>, <code>mark</code>
    </p>
    <p style="margin:8px 0;font-size:0.9em;color:#d32f2f">
      <strong>Note:</strong> The mark will be added to the selected result type (1st, 2nd, or Board).
      Marks must not exceed the subject's full mark for the selected class.
    </p>
    <p style="margin:8px 0;font-size:0.9em">
      <strong>Example for Class 10 (1st Term):</strong><br>
      roll_number | subject | mark<br>
      001 | English | 65<br>
      001 | Math | 72<br>
      002 | English | 58
    </p>
  </div>

  <form method="post" enctype="multipart/form-data">
    <div style="margin-bottom:15px">
      <label for="class"><strong>Select Class:</strong></label>
      <select id="class" name="class_grade" required style="display:block;width:100%;padding:10px;margin-top:8px;border:1px solid #ccc;border-radius:4px">
        <option value="">-- Choose Class --</option>
        {% for cls in classes %}
          <option value="{{ cls }}">Class {{ cls }}</option>
        {% endfor %}
      </select>
    </div>

    <div style="margin-bottom:15px">
      <label for="result_type"><strong>Result Type:</strong></label>
      <select id="result_type" name="result_type" required style="display:block;width:100%;padding:10px;margin-top:8px;border:1px solid #ccc;border-radius:4px">
        <option value="">-- Choose Result Type --</option>
        <option value="1st">1st Term</option>
        <option value="2nd">2nd Term</option>
        <option value="board">Board Exam</option>
      </select>
    </div>

    <div style="margin-bottom:15px">
      <label for="file"><strong>Select File (CSV or XLSX):</strong></label>
      <input type="file" id="file" name="file" accept=".csv,.xlsx,.xls" required style="display:block;width:100%;padding:10px;margin-top:8px;border:1px solid #ccc;border-radius:4px">
      <small style="color:#999">Accepted formats: CSV, XLSX, XLS (max 16MB)</small>
    </div>

    <div style="display:flex;gap:10px">
      <button class="btn" type="submit">üì§ Upload Results</button>
      <a class="btn" href="/admin" style="background-color:#888">‚Üê Back to Admin</a>
    </div>
  </form>
</div>

{% endblock %}
